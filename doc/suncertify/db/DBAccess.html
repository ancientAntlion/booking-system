<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_40) on Thu Mar 06 10:03:32 GMT 2014 -->
<title>DBAccess</title>
<meta name="date" content="2014-03-06">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DBAccess";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DBAccess.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../suncertify/db/DB.html" title="interface in suncertify.db"><span class="strong">Prev Class</span></a></li>
<li><a href="../../suncertify/db/DuplicateKeyException.html" title="class in suncertify.db"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?suncertify/db/DBAccess.html" target="_top">Frames</a></li>
<li><a href="DBAccess.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">suncertify.db</div>
<h2 title="Class DBAccess" class="title">Class DBAccess</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>suncertify.db.DBAccess</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">DBAccess</span>
extends java.lang.Object</pre>
<div class="block">Used to interact with the Database on the physical file system.
 This class should exists to separate the physical disk operations from
 The business logic elsewhere in the program.
 
 The actual RAF is private static, and anytime it is used is synchronized
 to ensure consistency with the file pointer during reads/writes</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Aaron</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/DBAccess.html#firstRecordIndex">firstRecordIndex</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/DBAccess.html#firstRecordNameIndex">firstRecordNameIndex</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/DBAccess.html#numberOfFieldsInRecord">numberOfFieldsInRecord</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int[]</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/DBAccess.html#recordEntryPositions">recordEntryPositions</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int[]</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/DBAccess.html#recordEntrySizes">recordEntrySizes</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/DBAccess.html#singleRecordByteSize">singleRecordByteSize</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/DBAccess.html#whitespaceString">whitespaceString</a></strong></code>
<div class="block">White space string 160 characters long used to "pad" records to their appropriate sizes</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../suncertify/db/DBAccess.html#DBAccess(java.lang.String)">DBAccess</a></strong>(java.lang.String&nbsp;dbLocation)</code>
<div class="block">Class initializes and we verify the file exists</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/DBAccess.html#create(java.lang.String[])">create</a></strong>(java.lang.String[]&nbsp;data)</code>
<div class="block">Creates a single record in the DB and returns the index of that record.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/DBAccess.html#delete(int)">delete</a></strong>(int&nbsp;recNo)</code>
<div class="block">Deletes a single record.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/DBAccess.html#find(java.lang.String[])">find</a></strong>(java.lang.String[]&nbsp;criteria)</code>
<div class="block">Returns an array of record numbers that match the supplied criteria.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String[]</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/DBAccess.html#getRecord(int)">getRecord</a></strong>(int&nbsp;recNo)</code>
<div class="block">Returns a string array containing a single record.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../suncertify/db/DBAccess.html#update(int, java.lang.String[])">update</a></strong>(int&nbsp;recNo,
      java.lang.String[]&nbsp;data)</code>
<div class="block">Updates a single record.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="whitespaceString">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>whitespaceString</h4>
<pre>public static&nbsp;java.lang.String whitespaceString</pre>
<div class="block">White space string 160 characters long used to "pad" records to their appropriate sizes</div>
</li>
</ul>
<a name="singleRecordByteSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>singleRecordByteSize</h4>
<pre>public static&nbsp;int singleRecordByteSize</pre>
</li>
</ul>
<a name="recordEntrySizes">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordEntrySizes</h4>
<pre>public static&nbsp;int[] recordEntrySizes</pre>
</li>
</ul>
<a name="recordEntryPositions">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordEntryPositions</h4>
<pre>public static&nbsp;int[] recordEntryPositions</pre>
</li>
</ul>
<a name="firstRecordIndex">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>firstRecordIndex</h4>
<pre>public static&nbsp;int firstRecordIndex</pre>
</li>
</ul>
<a name="firstRecordNameIndex">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>firstRecordNameIndex</h4>
<pre>public static&nbsp;int firstRecordNameIndex</pre>
</li>
</ul>
<a name="numberOfFieldsInRecord">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>numberOfFieldsInRecord</h4>
<pre>public static&nbsp;int numberOfFieldsInRecord</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DBAccess(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DBAccess</h4>
<pre>public&nbsp;DBAccess(java.lang.String&nbsp;dbLocation)
         throws <a href="../../suncertify/db/DatabaseInitializationException.html" title="class in suncertify.db">DatabaseInitializationException</a></pre>
<div class="block">Class initializes and we verify the file exists</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>dbLocation</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/DatabaseInitializationException.html" title="class in suncertify.db">DatabaseInitializationException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getRecord(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecord</h4>
<pre>public&nbsp;java.lang.String[]&nbsp;getRecord(int&nbsp;recNo)
                             throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a>,
                                    java.io.EOFException</pre>
<div class="block">Returns a string array containing a single record. We find the record by first getting the index
 Of the requested record. We do this by multiplying the set record byte size and multiplying it 
 by the record number. This puts the RAF pointer at the start of the desired record. After verifying
 That the byte deletion flag is not set we read it from there. Otherwise we throw a RecordNotFoundException</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>recNo</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code></dd>
<dd><code>java.io.EOFException</code></dd></dl>
</li>
</ul>
<a name="update(int, java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>public&nbsp;void&nbsp;update(int&nbsp;recNo,
          java.lang.String[]&nbsp;data)
            throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></pre>
<div class="block">Updates a single record. We find the record by first getting the index of the requested record.
 We do this by multiplying the set record byte size and multiplying it by the record number.
 This puts the RAF pointer at the start of the desired record. After verifying that the byte
 Deletion flag is not set we update it from there. Otherwise we throw a RecordNotFoundException</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>recNo</code> - </dd><dd><code>data</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="delete(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre>public&nbsp;void&nbsp;delete(int&nbsp;recNo)
            throws <a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a>,
                   <a href="../../suncertify/db/SecurityException.html" title="class in suncertify.db">SecurityException</a></pre>
<div class="block">Deletes a single record. We find the record by first getting the index of the requested record.
 We do this by multiplying the set record byte size and multiplying it by the record number.
 This puts the RAF pointer at the start of the desired record. We change 1 byte which flags the
 record as null. This block in the file now is ready to be overwritten.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>recNo</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/RecordNotFoundException.html" title="class in suncertify.db">RecordNotFoundException</a></code></dd>
<dd><code><a href="../../suncertify/db/SecurityException.html" title="class in suncertify.db">SecurityException</a></code></dd></dl>
</li>
</ul>
<a name="find(java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>find</h4>
<pre>public&nbsp;int[]&nbsp;find(java.lang.String[]&nbsp;criteria)</pre>
<div class="block">Returns an array of record numbers that match the supplied criteria. We use the getRecord()
 method in a loop to pull out every record in the DB. For each record retrieved we check if
 The criteria supplied matches the criteria in the DB. This is done as per the instructions.
 
 "Returns an array of record numbers that match the specified
 criteria. Field n in the database file is described by
 criteria[n]. A null value in criteria[n] matches any field
 value. A non-null  value in criteria[n] matches any field
 value that begins with criteria[n]. (For example, "Fred"
 matches "Fred" or "Freddy".)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>criteria</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>recordNumbers</dd></dl>
</li>
</ul>
<a name="create(java.lang.String[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>create</h4>
<pre>public&nbsp;int&nbsp;create(java.lang.String[]&nbsp;data)
           throws <a href="../../suncertify/db/DuplicateKeyException.html" title="class in suncertify.db">DuplicateKeyException</a></pre>
<div class="block">Creates a single record in the DB and returns the index of that record. We use the
 constructWritableByteArray(String[]) method to construct the byte array, then we use 
 the getFirstWritableIndex() method to determine where to place our file pointer is.
 Then we write the data to the file.
 
 I chose not to throw the DuplicateKeyException for 2 reasons. I explain my reasons
 In my choices.txt</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>recordNumber</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../suncertify/db/DuplicateKeyException.html" title="class in suncertify.db">DuplicateKeyException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DBAccess.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../suncertify/db/DB.html" title="interface in suncertify.db"><span class="strong">Prev Class</span></a></li>
<li><a href="../../suncertify/db/DuplicateKeyException.html" title="class in suncertify.db"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?suncertify/db/DBAccess.html" target="_top">Frames</a></li>
<li><a href="DBAccess.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
